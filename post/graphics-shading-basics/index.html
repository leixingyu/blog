<!DOCTYPE html>
<html lang=en>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  <meta name="google-site-verification" content="7qTkiEaZmufzh-fLDsly9ceOH7ZJnGX0vK_iBzTaGT0" />
  
  
  <title>Learning Graphics Basics | Tech Art Learning</title>
  <meta name="description" content="Glossary Wikipedia - Computer Graphics Glossary Shader: programs running on gpu that describes general computation (vertex transformation: vertex shader; shading calculation: fragment shader) G-buffe">
<meta property="og:type" content="article">
<meta property="og:title" content="Learning Graphics Basics">
<meta property="og:url" content="https://www.xingyulei.com/post/graphics-shading-basics/index.html">
<meta property="og:site_name" content="Tech Art Learning">
<meta property="og:description" content="Glossary Wikipedia - Computer Graphics Glossary Shader: programs running on gpu that describes general computation (vertex transformation: vertex shader; shading calculation: fragment shader) G-buffe">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://www.researchgate.net/profile/Christoph-Guetter/publication/235696712/figure/fig1/AS:299742132228097@1448475501091/The-graphics-pipeline-in-OpenGL-consists-of-these-5-steps-in-the-new-generation-of-cards.png">
<meta property="og:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=600/gamedev/uploads/2013/11/forward-v2.png">
<meta property="og:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=600/gamedev/uploads/2013/11/deferred-v2.png">
<meta property="og:image" content="https://www.scratchapixel.com/images/upload/rasterization/raytracing-raster5.png?">
<meta property="og:image" content="https://i.stack.imgur.com/e3SXv.png">
<meta property="og:image" content="https://i.stack.imgur.com/e9CSY.png">
<meta property="article:published_time" content="2020-09-16T04:00:00.000Z">
<meta property="article:modified_time" content="2022-09-24T03:31:00.910Z">
<meta property="article:author" content="Xingyu Lei">
<meta property="article:tag" content="rendering">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.researchgate.net/profile/Christoph-Guetter/publication/235696712/figure/fig1/AS:299742132228097@1448475501091/The-graphics-pipeline-in-OpenGL-consists-of-these-5-steps-in-the-new-generation-of-cards.png">
  <!-- Canonical links -->
  <link rel="canonical" href="https://www.xingyulei.com/post/graphics-shading-basics/index.html">
  
    <link rel="alternate" href="/atom.xml" title="Tech Art Learning" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 5.3.0"></head>


<body class="main-center theme-blue" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://github.com/leixingyu" target="_blank">
          <img class="img-circle img-rotate" src="/images/avatar.png" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">Xingyu Lei</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">Technical Artist</h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> California, US</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="Search" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="Type something..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav menu-highlight">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">Home</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="icon icon-cup-fill"></i>
            
            <span class="menu-title">About</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-repository">
          <a href="/repository">
            
            <i class="icon icon-project"></i>
            
            <span class="menu-title">Repository</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">Archives</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/leixingyu" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="https://www.linkedin.com/in/xingyu-lei/" target="_blank" title="Linkedin" data-toggle=tooltip data-placement=top><i class="icon icon-linkedin"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">Board</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <img src="https://i.imgur.com/nXNdEmr.jpg" alt="banner" width=300px> <h4>Welcome to our humble abode!</h4>
<p>&#128293 Next blog post working in progress</p> </br> <p> (Feel free to contact me via <span style="color:blue">techartlei@gmail.com</span>) </p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">Categories</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/3d-math/">3d math</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/graphics-programming/">graphics programming</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/learning-log/">learning log</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/maya-communication/">maya communication</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/maya-python-api/">maya python api</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tech-summary/">tech summary</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/unreal-cinematic/">unreal cinematic</a><span class="category-list-count">2</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget-body tagcloud">
      <a href="/tags/batch/" style="font-size: 13.25px;">batch</a> <a href="/tags/c/" style="font-size: 13.13px;">c#</a> <a href="/tags/c/" style="font-size: 13px;">c++</a> <a href="/tags/command-port/" style="font-size: 13px;">command port</a> <a href="/tags/general/" style="font-size: 13px;">general</a> <a href="/tags/math/" style="font-size: 13.25px;">math</a> <a href="/tags/maya/" style="font-size: 13.88px;">maya</a> <a href="/tags/pipeline/" style="font-size: 13.13px;">pipeline</a> <a href="/tags/pyqt/" style="font-size: 13.75px;">pyqt</a> <a href="/tags/python/" style="font-size: 14px;">python</a> <a href="/tags/rendering/" style="font-size: 13px;">rendering</a> <a href="/tags/socket/" style="font-size: 13.13px;">socket</a> <a href="/tags/style/" style="font-size: 13.13px;">style</a> <a href="/tags/template/" style="font-size: 13.63px;">template</a> <a href="/tags/threading/" style="font-size: 13.13px;">threading</a> <a href="/tags/unity/" style="font-size: 13.38px;">unity</a> <a href="/tags/unreal/" style="font-size: 13.5px;">unreal</a> <a href="/tags/windows/" style="font-size: 13.13px;">windows</a>
    </div>
  </div>

    
      
  <div class="widget">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled ">
        
          <li>
            
            <div class="item-thumb">
              <a href="/post/ue-commandline-python/" class="thumb">
    
    
        <span style="background-image:url(https://2.bp.blogspot.com/-TAOsVGZBJpY/WYe9le4VJ8I/AAAAAAAAIDY/e1OVOwl1Zq8nFzqDfHRms2rVTl-dDtsmwCLcBGAs/s1600/20170807-picocli-javapCommandLineClassNestedInterpreterOption.PNG)" alt="Three different ways of using Python Unreal command line" class="thumb-image"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/learning-log/">learning log</a>
              </p>
              <p class="item-title">
                <a href="/post/ue-commandline-python/" class="title">Three different ways of using Python Unreal command line</a>
              </p>
              <p class="item-date">
                <time datetime="2022-11-06T04:00:00.000Z" itemprop="datePublished">2022-11-06</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/post/math-xform-conversion/" class="thumb">
    
    
        <span style="background-image:url(https://hips.hearstapps.com/hmg-prod/images/23-1597850983.jpg)" alt="Transformation Matrix Conversion between DCCs" class="thumb-image"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/learning-log/">learning log</a>
              </p>
              <p class="item-title">
                <a href="/post/math-xform-conversion/" class="title">Transformation Matrix Conversion between DCCs</a>
              </p>
              <p class="item-date">
                <time datetime="2022-10-22T04:00:00.000Z" itemprop="datePublished">2022-10-22</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/post/math-change-of-basis/" class="thumb">
    
    
        <span style="background-image:url(https://upload.wikimedia.org/wikipedia/commons/thumb/5/59/3d_basis_transformation.svg/1200px-3d_basis_transformation.svg.png)" alt="Change of Basis Matrix" class="thumb-image"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/3d-math/">3d math</a>
              </p>
              <p class="item-title">
                <a href="/post/math-change-of-basis/" class="title">Change of Basis Matrix</a>
              </p>
              <p class="item-date">
                <time datetime="2022-09-25T04:00:00.000Z" itemprop="datePublished">2022-09-25</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/post/math-euler-gimbal/" class="thumb">
    
    
        <span style="background-image:url(https://upload.wikimedia.org/wikipedia/commons/thumb/d/d5/Gyroscope_operation.gif/220px-Gyroscope_operation.gif)" alt="Euler Angles and Gimbal Lock Problem" class="thumb-image"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/3d-math/">3d math</a>
              </p>
              <p class="item-title">
                <a href="/post/math-euler-gimbal/" class="title">Euler Angles and Gimbal Lock Problem</a>
              </p>
              <p class="item-date">
                <time datetime="2022-09-17T04:00:00.000Z" itemprop="datePublished">2022-09-17</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/post/general-tech-note/" class="thumb">
    
    
        <span style="background-image:url(https://cdn.tutsplus.com/cdn-cgi/image/width=600/gamedev/uploads/2013/11/deferred-v2.png)" alt="My Personal Technical Notes" class="thumb-image"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/tech-summary/">tech summary</a>
              </p>
              <p class="item-title">
                <a href="/post/general-tech-note/" class="title">My Personal Technical Notes</a>
              </p>
              <p class="item-date">
                <time datetime="2022-09-09T04:00:00.000Z" itemprop="datePublished">2022-09-09</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<aside class="sidebar sidebar-toc" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <nav id="toc" class="article-toc">
      <h3 class="toc-title">Table of Contents</h3>
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#glossary"><span class="toc-text"> Glossary</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vertex-lighting-vs-per-pixel-lighting"><span class="toc-text"> Vertex lighting vs. Per-pixel lighting</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#vertex-lighting"><span class="toc-text"> Vertex Lighting</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#per-pixel-lighting"><span class="toc-text"> Per-Pixel Lighting</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#example-of-a-per-pixel-lighting-shader"><span class="toc-text"> Example of a per-pixel lighting shader</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#vertex-shader"><span class="toc-text"> Vertex Shader</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#fragment-shader"><span class="toc-text"> Fragment Shader</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#forward-vs-deferred-rendering"><span class="toc-text"> Forward vs. Deferred Rendering</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#forward-rendering"><span class="toc-text"> Forward Rendering</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#deferred-rendering"><span class="toc-text"> Deferred Rendering</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#discussion"><span class="toc-text"> Discussion</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rasterization-vs-ray-tracing"><span class="toc-text"> Rasterization vs. Ray tracing</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#rasterization"><span class="toc-text"> Rasterization</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ray-tracing"><span class="toc-text"> Ray tracing</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#discussion-2"><span class="toc-text"> Discussion</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reference"><span class="toc-text"> Reference</span></a></li></ol>
    </nav>
  </div>
</aside>

<main class="main" role="main">
  <div class="content">
  <article id="post-graphics-shading-basics" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      Learning Graphics Basics
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/post/graphics-shading-basics/" class="article-date">
	  <time datetime="2020-09-16T04:00:00.000Z" itemprop="datePublished">2020-09-16</time>
	</a>
</span>
        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/graphics-programming/">graphics programming</a>
  </span>

        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/tags/rendering/" rel="tag">rendering</a>
  </span>


        

        
      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <h3 id="glossary"><a class="markdownIt-Anchor" href="#glossary"></a> Glossary</h3>
<p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Glossary_of_computer_graphics">Wikipedia - Computer Graphics Glossary</a></p>
<p><strong>Shader</strong>: programs running on gpu that describes general computation (vertex transformation: vertex shader;
shading calculation: fragment shader)</p>
<p><strong>G-buffer</strong>: a screen space representation of geometry and material information (e.g. color, normal, position/depth)</p>
<p><strong>Fragment</strong>: is the corresponding pixel generated by geometric primitives,
but a pixel on screen can be a product of more than one fragment due to Z-buffering, blending etc.</p>
<h3 id="vertex-lighting-vs-per-pixel-lighting"><a class="markdownIt-Anchor" href="#vertex-lighting-vs-per-pixel-lighting"></a> Vertex lighting vs. Per-pixel lighting</h3>
<p><img src="https://www.researchgate.net/profile/Christoph-Guetter/publication/235696712/figure/fig1/AS:299742132228097@1448475501091/The-graphics-pipeline-in-OpenGL-consists-of-these-5-steps-in-the-new-generation-of-cards.png" alt="modern graphics pipeline" /></p>
<h4 id="vertex-lighting"><a class="markdownIt-Anchor" href="#vertex-lighting"></a> Vertex Lighting</h4>
<ul>
<li>
<p>Lighting is computed per-vertex</p>
</li>
<li>
<p>calculation happens in the vertex shader</p>
</li>
<li>
<p>lighting/color information is
then linearly interpolated across faces and rasterized</p>
</li>
<li>
<p>it is cheaper, faster (since there are fewer vertices compared to pixels) but noticeable artifact with low-poly objects</p>
</li>
</ul>
<h4 id="per-pixel-lighting"><a class="markdownIt-Anchor" href="#per-pixel-lighting"></a> Per-Pixel Lighting</h4>
<ul>
<li>
<p>Lighting is computed per-pixel/fragment (but what is this exactly? see the example below)</p>
</li>
<li>
<p>Calculation happens in the fragment shader</p>
</li>
<li>
<p>normal information (passed from vertex shader) is interpolated on the faces, lighting/color is calculated and rasterized.</p>
</li>
<li>
<p>it is more expensive but less artifact</p>
</li>
</ul>
<h3 id="example-of-a-per-pixel-lighting-shader"><a class="markdownIt-Anchor" href="#example-of-a-per-pixel-lighting-shader"></a> Example of a per-pixel lighting shader</h3>
<h4 id="vertex-shader"><a class="markdownIt-Anchor" href="#vertex-shader"></a> Vertex Shader</h4>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#version 330 core</span><br><span class="line">layout (location &#x3D; 0) in vec3 aPos;</span><br><span class="line">layout (location &#x3D; 1) in vec3 aNormal;</span><br><span class="line"></span><br><span class="line">out vec3 FragPos;</span><br><span class="line">out vec3 Normal;</span><br><span class="line"></span><br><span class="line">uniform mat4 model;</span><br><span class="line">uniform mat4 view;</span><br><span class="line">uniform mat4 projection;</span><br><span class="line"></span><br><span class="line">void main()</span><br><span class="line">&#123;</span><br><span class="line">    FragPos &#x3D; vec3(model * vec4(aPos, 1.0));</span><br><span class="line">    Normal &#x3D; mat3(transpose(inverse(model))) * aNormal;  </span><br><span class="line">    </span><br><span class="line">    gl_Position &#x3D; projection * view * vec4(FragPos, 1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="fragment-shader"><a class="markdownIt-Anchor" href="#fragment-shader"></a> Fragment Shader</h4>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">#version 330 core</span><br><span class="line">out vec4 FragColor;</span><br><span class="line"></span><br><span class="line">in vec3 Normal;  </span><br><span class="line">in vec3 FragPos;  </span><br><span class="line">  </span><br><span class="line">uniform vec3 lightPos; </span><br><span class="line">uniform vec3 viewPos; </span><br><span class="line">uniform vec3 lightColor;</span><br><span class="line">uniform vec3 objectColor;</span><br><span class="line"></span><br><span class="line">void main()</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; ambient</span><br><span class="line">    float ambientStrength &#x3D; 0.1;</span><br><span class="line">    vec3 ambient &#x3D; ambientStrength * lightColor;</span><br><span class="line">  	</span><br><span class="line">    &#x2F;&#x2F; diffuse </span><br><span class="line">    vec3 norm &#x3D; normalize(Normal);</span><br><span class="line">    vec3 lightDir &#x3D; normalize(lightPos - FragPos);</span><br><span class="line">    float diff &#x3D; max(dot(norm, lightDir), 0.0);</span><br><span class="line">    vec3 diffuse &#x3D; diff * lightColor;</span><br><span class="line">    </span><br><span class="line">    &#x2F;&#x2F; specular</span><br><span class="line">    float specularStrength &#x3D; 0.5;</span><br><span class="line">    vec3 viewDir &#x3D; normalize(viewPos - FragPos);</span><br><span class="line">    vec3 reflectDir &#x3D; reflect(-lightDir, norm);  </span><br><span class="line">    float spec &#x3D; pow(max(dot(viewDir, reflectDir), 0.0), 32);</span><br><span class="line">    vec3 specular &#x3D; specularStrength * spec * lightColor;  </span><br><span class="line">        </span><br><span class="line">    vec3 result &#x3D; (ambient + diffuse + specular) * objectColor;</span><br><span class="line">    FragColor &#x3D; vec4(result, 1.0);</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p>As you can see, fragment position and normal information are passed into the fragment shader
from vertex shader (where the pre-compute happens), the lighting calculation (Phong lighting)
is calculated per-fragment.</p>
<p>On a related note: gpu cost are related to</p>
<ol>
<li>how many vertices are passed in to the gpu from
buffer and</li>
<li>how complex the lighting calculation is in the fragment shader (this could be
the algorithm/model complexity, and the number of passes);</li>
</ol>
<hr />
<h3 id="forward-vs-deferred-rendering"><a class="markdownIt-Anchor" href="#forward-vs-deferred-rendering"></a> Forward vs. Deferred Rendering</h3>
<h4 id="forward-rendering"><a class="markdownIt-Anchor" href="#forward-rendering"></a> Forward Rendering</h4>
<p>The standard, out-of-the-box rendering technique</p>
<p>Geometries are passed to gpu, going through vertex shader and fragment shader,
with each geometry and each light computed separately one at a time to form the final render.</p>
<p>Render complexity: O(num of geometry fragments * num of lights)</p>
<p><img src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/gamedev/uploads/2013/11/forward-v2.png" alt="forward rendering" /></p>
<h4 id="deferred-rendering"><a class="markdownIt-Anchor" href="#deferred-rendering"></a> Deferred Rendering</h4>
<p>Render is deferred until all geometry has been processed</p>
<p>Geometries are passed to gpu, going through vertex shader and fragment shader (without lighting pass),
final rendering is computed/combined with multiple render passes
(one pass for getting all geometry information to G-buffer,
second pass for compute lighting based on the G-buffer).</p>
<p>Render complexity: O(screen resolution * num of lights)</p>
<p><img src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/gamedev/uploads/2013/11/deferred-v2.png" alt="deferred rendering" /></p>
<h4 id="discussion"><a class="markdownIt-Anchor" href="#discussion"></a> Discussion</h4>
<p>Everything all comes down to lighting, as gpu can easily handle vertex information,
but the most expensive are lighting calculation which can easily slow down the rendering.
Forward rendering iterates and compute each fragments of each geometry, no matter if it overlaps or is hidden
by other fragments. So for each pixel, we could have already run multiple fragment shaders.</p>
<p>This is where deferred rendering come in handy, the G-buffer stores information such as color, normal and depth.
The lighting later on can know how to produce the final render by combining all the information (For example: depth test can
also cull out all the fragments that are being obscured). So essentially, each pixel only runs a single fragment shader.</p>
<hr />
<h3 id="rasterization-vs-ray-tracing"><a class="markdownIt-Anchor" href="#rasterization-vs-ray-tracing"></a> Rasterization vs. Ray tracing</h3>
<p>The forward, deferred rendering techniques are all in the realm of rasterization, which is the
most popular and traditional real-time rendering technique. With the advance of hardware, ray tracing,
which is computationally demanding (usually used in films/animation) can now be used in
real-time video games.</p>
<h4 id="rasterization"><a class="markdownIt-Anchor" href="#rasterization"></a> Rasterization</h4>
<p>We gather objects information and projects each one by one on screen (per fragment), fragment shader
computes the final color of every fragment to form pixels on screen.</p>
<p>The fundamental of rasterizing is that for each object/geometry, we look at (rasterize it) it’s verts/triangles
to cover pixels.</p>
<p>So, as discussed in deferred rendering, every object is drawn but not all of them are displayed on screen.
This overdraw can be accelerated by using deferred shading’s depth test.</p>
<p><img src="https://www.scratchapixel.com/images/upload/rasterization/raytracing-raster5.png?" alt="rasterization" /></p>
<h4 id="ray-tracing"><a class="markdownIt-Anchor" href="#ray-tracing"></a> Ray tracing</h4>
<p>We cast rays from our eyes (camera) for each pixel and gather information of those rays as they travel
through/intersects with objects and interacts with lights
to form the final render on screen.</p>
<p>The fundamental of ray tracing is that for each pixel, we look at (shoot a ray) each object/geometry to see
how they contribute to the color of that pixel.</p>
<p>As for ray tracing, we need to shoot many rays for each pixel, and more when there are reflection and refraction.
One way to accelerate this is to use bounding volume.</p>
<p><img src="https://i.stack.imgur.com/e3SXv.png" alt="ray tracing" /></p>
<h4 id="discussion-2"><a class="markdownIt-Anchor" href="#discussion-2"></a> Discussion</h4>
<p>The most significant difference in visual is that ray tracing is physically more accurate
than rasterization, thus more realistic. Which is more apparent in dynamic environment with
objects that reflects and refract. Rasterization needs many estimation techniques to handle lighting and shadowing
such as more render passes, baked light map, cubemap reflection, but ray tracing gets all the results out of the box.</p>
<p><img src="https://i.stack.imgur.com/e9CSY.png" alt="rasterization vs. ray tracing" /></p>
<hr />
<h3 id="reference"><a class="markdownIt-Anchor" href="#reference"></a> Reference</h3>
<p><a target="_blank" rel="noopener" href="https://gamedevelopment.tutsplus.com/articles/forward-rendering-vs-deferred-rendering--gamedev-12342">Envato tuts+ - Forward Rendering vs. Deferred Rendering</a></p>
<p><a target="_blank" rel="noopener" href="https://learnopengl.com/Advanced-Lighting/Deferred-Shading">Learn OpenGL - Deferred Shading</a></p>
<p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Deferred_shading#Deferred_lighting">Wikipedia - Deferred Lighting</a></p>
<p><a target="_blank" rel="noopener" href="https://learnopengl.com/Lighting/Basic-Lighting">Learn OpenGL - Basic Lighting</a></p>
<p><a target="_blank" rel="noopener" href="https://knowww.eu/nodes/59b8e93cd54a862e9d7e414a">Knowww - Per-vertex vs. per-fragment lighting</a></p>
<p><a target="_blank" rel="noopener" href="https://answers.unity.com/questions/1749305">Unity Forum - What’s the difference between per-pixel and per-vertex lit in Forward Rendering?</a></p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=dhVJE7g3hig">Youtube - OpenGL Fragment Shaders | How Do Fragment Shaders Work?</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.nvidia.com/blog/ray-tracing-essentials-part-2-rasterization-versus-ray-tracing/">Nvidia - Ray Tracing Essentials</a></p>
<p><a target="_blank" rel="noopener" href="https://computergraphics.stackexchange.com/questions/4585">Stack Exchange - Mirror Reflections: Ray Tracing or Rasterization?</a></p>
<p><a target="_blank" rel="noopener" href="https://www.quora.com/What-is-the-diferrence-between-ray-tracing-and-very-high-shader-details">Quora - What is the difference between ray tracing and very high shader details?</a></p>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
  
    
    <li class="post-copyright-link hidden-xs">
      <strong>Shared Link：</strong>
      <a href="https://www.xingyulei.com/post/graphics-shading-basics/" title="Learning Graphics Basics" target="_blank" rel="external">https://www.xingyulei.com/post/graphics-shading-basics/</a>
    </li>
    
	
    <li class="post-copyright-license">
      <strong>Copyright Notice： </strong> This post is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en" target="_blank" rel="external">Creative Commons Attribution 4.0 International License </a>. Please give appropriate credit.
    </li>
	
  </ul>
</blockquote>



<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/leixingyu" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.png" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/leixingyu" target="_blank"><span class="text-dark">Xingyu Lei</span><small class="ml-1x">Technical Artist</small></a></h3>
        <div>Problem solver; Game and film enthusiast;</div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/post/unity-verlet-integration/" title="Verlet Integration in Unity"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a>
    </li>
    
    
    <li class="next">
      <a href="/post/cpp-reference-pointer/" title="C++ Reference and Pointer Guide"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
    <li class="toggle-toc">
      <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="Table of Contents" role="button">
        <span>[&nbsp;</span><span>Table of Contents</span>
        <i class="text-collapsed icon icon-anchor"></i>
        <i class="text-in icon icon-close"></i>
        <span>]</span>
      </a>
    </li>
    
  </ul>
  
  
  
  <div class="bar-right">
    
  </div>
  </div>
</nav>
  


</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/leixingyu" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="https://www.linkedin.com/in/xingyu-lei/" target="_blank" title="Linkedin" data-toggle=tooltip data-placement=top><i class="icon icon-linkedin"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        &copy; 2022 Xingyu Lei
        
        <!-- <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div> -->
    </div>
	
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   




   




    <script defer type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-206682944-1', 'auto');
ga('send', 'pageview');

</script>



</body>
</html>