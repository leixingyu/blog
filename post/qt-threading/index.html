<!DOCTYPE html>
<html lang=en>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  <meta name="google-site-verification" content="7qTkiEaZmufzh-fLDsly9ceOH7ZJnGX0vK_iBzTaGT0" />
  
  
  <title>No More Freezing using Qt Multithreading: Learn with Examples | Tech Art Learning</title>
  <meta name="description" content="Say goodbye to freezing with Qt multithreading using our comprehensive tutorial. Learn how to use multithreading to create responsive and efficient GUI applications, avoid freezing and lag, and improv">
<meta property="og:type" content="article">
<meta property="og:title" content="No More Freezing using Qt Multithreading: Learn with Examples">
<meta property="og:url" content="https://www.xingyulei.com/post/qt-threading/index.html">
<meta property="og:site_name" content="Tech Art Learning">
<meta property="og:description" content="Say goodbye to freezing with Qt multithreading using our comprehensive tutorial. Learn how to use multithreading to create responsive and efficient GUI applications, avoid freezing and lag, and improv">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i.imgur.com/VZBrqsw.gif">
<meta property="og:image" content="https://i.imgur.com/J3a5hdT.gif">
<meta property="og:image" content="https://i.imgur.com/CXxVPC4.gif">
<meta property="og:image" content="https://i.imgur.com/ru7UWl1.gif">
<meta property="article:published_time" content="2022-05-14T16:00:00.000Z">
<meta property="article:modified_time" content="2023-11-19T00:16:00.438Z">
<meta property="article:author" content="Xingyu Lei">
<meta property="article:tag" content="pipeline">
<meta property="article:tag" content="threading">
<meta property="article:tag" content="template">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.imgur.com/VZBrqsw.gif">
  <!-- Canonical links -->
  <link rel="canonical" href="https://www.xingyulei.com/post/qt-threading/index.html">
  
    <link rel="alternate" href="/atom.xml" title="Tech Art Learning" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9332331939325190"
     crossorigin="anonymous"></script>
<meta name="generator" content="Hexo 7.0.0-rc1"></head>


<body class="main-center theme-blue" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://github.com/leixingyu" target="_blank">
          <img class="img-circle img-rotate" src="/images/avatar.png" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">Xingyu Lei</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">Technical Artist</h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> California, US</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="Search" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="Type something..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav menu-highlight">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">Home</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="icon icon-users"></i>
            
            <span class="menu-title">About</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-repository">
          <a href="/repository">
            
            <i class="icon icon-github"></i>
            
            <span class="menu-title">Repository</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">Archives</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/leixingyu" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="https://www.linkedin.com/in/xingyu-lei/" target="_blank" title="Linkedin" data-toggle=tooltip data-placement=top><i class="icon icon-linkedin"></i></a></li>
        
        <li><a href="https://www.youtube.com/@xingyulei" target="_blank" title="Youtube" data-toggle=tooltip data-placement=top><i class="icon icon-youtube"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title"></h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="xingyulei" data-color="#5F7FFF" data-emoji="🔓"  data-font="Lato" data-text="Subscribe Here" data-outline-color="#000000" data-font-color="#ffffff" data-coffee-color="#FFDD00" ></script>
<hr> <h4>Board</h4> <p>Hello! I will put my findings here every so often.</p> <a style="color:blue;" target="_blank" rel="noopener" href="https://www.buymeacoffee.com/xingyulei">Buy me a coffee ($2) for exclusive content that you won't find anywhere else!</a>
<hr> <h4>Free Tools</h4>
<script src="https://tarptaeya.github.io/repo-card/repo-card.js"></script> <div class="repo-card" data-repo="leixingyu/unrealStylesheet"></div> <div class="repo-card" data-repo="leixingyu/unrealScriptEditor"></div> <div class="repo-card" data-repo="leixingyu/mayaAsciiViewer"></div> <div class="repo-card" data-repo="leixingyu/autoRigger"></div> <br>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">Categories</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/general/">general</a><span class="category-list-count">16</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/graphics/">graphics</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/maya/">maya</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/qt/">qt</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/unity/">unity</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/unreal/">unreal</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/windows/">windows</a><span class="category-list-count">4</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">Tags</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/" rel="tag">animation</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/batch/" rel="tag">batch</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blueprint/" rel="tag">blueprint</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/" rel="tag">c#</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/" rel="tag">c++</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/design/" rel="tag">design</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/" rel="tag">math</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maya-api/" rel="tag">maya api</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/optimization/" rel="tag">optimization</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pipeline/" rel="tag">pipeline</a><span class="tag-list-count">33</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a><span class="tag-list-count">25</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rendering/" rel="tag">rendering</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sequencer/" rel="tag">sequencer</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/socket/" rel="tag">socket</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/style/" rel="tag">style</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/template/" rel="tag">template</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/threading/" rel="tag">threading</a><span class="tag-list-count">2</span></li></ul>
    </div>
  </div>


    
  </div>
</aside>

  
  
<main class="main" role="main">
  <div class="content">
  <article id="post-qt-threading" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      No More Freezing using Qt Multithreading: Learn with Examples
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/post/qt-threading/" class="article-date">
	  <time datetime="2022-05-14T16:00:00.000Z" itemprop="datePublished">2022-05-15</time>
	</a>
</span>
        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/qt/">qt</a>
  </span>

        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/tags/pipeline/" rel="tag">pipeline</a>, <a class="article-tag-link-link" href="/tags/template/" rel="tag">template</a>, <a class="article-tag-link-link" href="/tags/threading/" rel="tag">threading</a>
  </span>


        

        
      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <h2 id="introduction"><a class="markdownIt-Anchor" href="#introduction"></a> Introduction</h2>
<p>It is inevitable that some of our tasks in the program will take long time to run,
leaving the user staring at a frozen screen, whether it is reading/writing a large file,
searching database or syncing assets. In a production environment,
these seconds can really add up for the entire team; can you imagine
how many working hours are wasted when every user need to wait for,
let’s say, a library tool to query the entire asset database and finally displaying them
every single time.</p>
<p>We can surely improve the query, but that’s usually not where the bottleneck is.
The speed of querying is usually sufficient for human brain to process. What
we want is not to be slow down by un-interactive GUI.
So, why not have assets to fill little by little in a continuous stream, or
just query their name first, and use a separate thread to load in rest of the information
like date created, author and thumbnail.</p>
<p>Now, let’s get straight to the point. I’m going to show three basic examples
of different methods to deal with frozen GUI, each has its own use cases.</p>
<h2 id="example-issue"><a class="markdownIt-Anchor" href="#example-issue"></a> Example Issue</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Window</span>(QtWidgets.QMainWindow):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, parent=<span class="literal">None</span></span>):</span><br><span class="line">        QtWidgets.QMainWindow.__init__(self, parent)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ui setup: please ignore</span></span><br><span class="line">        widget = QtWidgets.QWidget()</span><br><span class="line">        layout = QtWidgets.QGridLayout()</span><br><span class="line"></span><br><span class="line">        button = QtWidgets.QPushButton(<span class="string">&#x27;run task!&#x27;</span>)</span><br><span class="line">        button.clicked.connect(self.run_long_task)</span><br><span class="line">        edit = QtWidgets.QLineEdit()</span><br><span class="line"></span><br><span class="line">        layout.addWidget(edit, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        layout.addWidget(button, <span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">        widget.setLayout(layout)</span><br><span class="line">        self.setCentralWidget(widget)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run_long_task</span>(<span class="params">self</span>):</span><br><span class="line">        time.sleep(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app = QtWidgets.QApplication(sys.argv)</span><br><span class="line">    win = Window()</span><br><span class="line">    win.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>
<p>Here I created a simple example to show how a long-running task
can block controls in our Qt Gui.</p>
<p>The <code>run_long_task()</code> is simply a <code>time.sleep()</code> that will halt for 2 seconds
util returning control back to the main event loop.</p>
<p>After evoking the <code>run_long_task()</code> method, we can
no longer interact with the line edit from our UI, until the task has finished.</p>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="https://i.imgur.com/VZBrqsw.gif" alt="no-work" /></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">(Clicking and typing has no effect while task is running)</td>
</tr>
</tbody>
</table>
<h2 id="processevent"><a class="markdownIt-Anchor" href="#processevent"></a> <code>processEvent()</code></h2>
<p>Using <code>QApplication.processEvent()</code> can achieve a <strong>semi-interactive</strong> GUI
during a long-running task. Here’s to show what I meant.</p>
<p>Let’s add a progress bar to track our task status.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Window</span>(QtWidgets.QMainWindow):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, parent=<span class="literal">None</span></span>):</span><br><span class="line">        QtWidgets.QMainWindow.__init__(self, parent)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ui setup: add progress bar</span></span><br><span class="line">        self.ui_progress = QtWidgets.QProgressBar()</span><br><span class="line">        self.statusBar().addPermanentWidget(self.ui_progress)</span><br><span class="line">        ...</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">update_status</span>(<span class="params">status_bar, msg</span>):</span><br><span class="line">    status_bar.showMessage(msg, <span class="number">2000</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">update_progress</span>(<span class="params">progress_bar, value</span>):</span><br><span class="line">    progress_bar.setValue(value)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> value &gt;= <span class="number">100</span>:</span><br><span class="line">        progress_bar.setVisible(<span class="literal">False</span>)</span><br><span class="line">    <span class="keyword">elif</span> progress_bar.isHidden():</span><br><span class="line">        progress_bar.setVisible(<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p>And now, by evoking the
static method <code>processEvent()</code> during the long-running task, we enforce
Qt to handle normal events like updating GUI, and respond to our user input,
before handing the control back to the task.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">run_long_task</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>):</span><br><span class="line">        sleep(<span class="number">0.5</span>)</span><br><span class="line">        update_status(self.statusBar(), <span class="built_in">str</span>(i))</span><br><span class="line">        update_progress(self.ui_progress, i*<span class="number">10</span>)</span><br><span class="line">        </span><br><span class="line">        QtCore.QCoreApplication.processEvents()</span><br></pre></td></tr></table></figure>
<p>Now, as we can see, our main GUI can update the progress bar and messages,
and even allow us to sort of interact with the line edit, but the interaction is by no
means smooth.</p>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="https://i.imgur.com/J3a5hdT.gif" alt="processEvent" /></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">(Somewhat interactive, yet choppy)</td>
</tr>
</tbody>
</table>
<p>Before we create a real multi-threading solution, first,
let’s establish a signal slot workflow that Qt provides: instead of
updating the progress bar and status bar by calling its method directly,
we emit a signal to handle that.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">    ...</span><br><span class="line">    self.progressed.connect(<span class="keyword">lambda</span> value: update_progress(self.ui_progress, value))</span><br><span class="line">    self.messaged.connect(<span class="keyword">lambda</span> msg: update_status(self.statusBar(), msg))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run_long_task</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>):</span><br><span class="line">        sleep(<span class="number">0.5</span>)</span><br><span class="line">        self.progressed.emit(<span class="built_in">int</span>(i*<span class="number">10</span>))</span><br><span class="line">        self.messaged.emit(<span class="built_in">str</span>(i))</span><br></pre></td></tr></table></figure>
<h3 id="qthread"><a class="markdownIt-Anchor" href="#qthread"></a> QThread</h3>
<script src="https://gist.github.com/leixingyu/9601e352eba22124a0f97e1fc574a262.js"></script>
<p>Instead of directly subclassing <code>QThread()</code>, it is recommended by many to
create a <code>QObject()</code> and attach it to a <code>QThread()</code>. The <code>QObject()</code> we created,
known as the worker, will be running our long-running task, and emits the
update signals.</p>
<p>It is important to keep a note that, the <code>QThread()</code> that houses our worker needs to live in the main
event loop (i.e. kept in the main application as <code>self.__thread</code>).
If not, it will be collected by <em>gc</em> and the thread will exit pre-maturely.</p>
<p><code>thread.worker = worker</code> is also essential if the worker doesn’t live in the main
event loop (i.e. <code>self.__worker</code>).</p>
<p>Now as we can see, we can freely interact with the line edit while the long-running
task is handled in the background.</p>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="https://i.imgur.com/CXxVPC4.gif" alt="qthread" /></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">(Very smooth typing)</td>
</tr>
</tbody>
</table>
<h3 id="qthreadpool-and-qrunnable"><a class="markdownIt-Anchor" href="#qthreadpool-and-qrunnable"></a> QThreadPool and QRunnable</h3>
<p>A natural progression would be handling multiple long-running tasks,
luckily, we have <code>QThreadPool</code> for that.</p>
<p>In the following example, we have <strong>three</strong> long-running task in the background,
while we still have free control of the main GUI.</p>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="https://i.imgur.com/ru7UWl1.gif" alt="qthreadpool" /></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">(Multiple threads and smooth typing)</td>
</tr>
</tbody>
</table>
<script src="https://gist.github.com/leixingyu/f5fc3cc1ef03db1f254dab2a23b85bc7.js"></script>
<ul>
<li>
<p><code>QThreadPool</code> manages <code>QRunnable</code>, which doesn’t have built-in signals, thus we
need to attach signals externally by creating a <code>QObject</code> to store them.</p>
</li>
<li>
<p><code>QThreadPool</code> also deletes the <code>QRunnable</code> instances automatically when it finishes by default.</p>
</li>
<li>
<p>if max thread is exceeded, the process is queued until a thread is available.</p>
</li>
</ul>
<h2 id="reference"><a class="markdownIt-Anchor" href="#reference"></a> Reference</h2>
<p><a target="_blank" rel="noopener" href="https://www.pythonguis.com/tutorials/multithreading-pyqt-applications-qthreadpool/">PythonGUIs - Multithreading PyQt5 applications with QThreadPool</a></p>
<p><a target="_blank" rel="noopener" href="https://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/">Maya’s Programming &amp; Electronics Blog - How To Really, Truly Use QThreads; The Full Explanation</a></p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/6783194">Stack Overflow - Background thread with QThread in PyQt</a></p>
<p><a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/qcoreapplication.html#processEvents">Qt doc - Process Events</a></p>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
  
    
    <li class="post-copyright-link hidden-xs">
      <strong>Shared Link：</strong>
      <a href="https://www.xingyulei.com/post/qt-threading/" title="No More Freezing using Qt Multithreading: Learn with Examples" target="_blank" rel="external">https://www.xingyulei.com/post/qt-threading/</a>
    </li>
    
	
    <li class="post-copyright-license">
      <strong>Copyright Notice： </strong> This post is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en" target="_blank" rel="external">Creative Commons Attribution 4.0 International License </a>. Please give appropriate credit.
    </li>
	
	<li class="post-copyright-license">
      <strong>Disclaimer： </strong> The information contained in this post is provided on an "as is" basis. The author assumes no responsibility or liability for any errors or omissions in the content of this post. 
    </li>
	
  </ul>
</blockquote>



<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/leixingyu" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.png" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/leixingyu" target="_blank"><span class="text-dark">Xingyu Lei</span><small class="ml-1x">Technical Artist</small></a></h3>
        <div>Problem solver; Game and film enthusiast;</div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/post/ue-cinematic-sequencer/" title="Professional-Quality Cinematic with Unreal Engine Sequencer"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a>
    </li>
    
    
    <li class="next">
      <a href="/post/qt-pie-chart/" title="Create Stunning Pie Charts in Qt : A Step-by-Step Tutorial"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>$$$</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
  </div>
  </div>
</nav>
  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>Thank you for the support! &#9749</p>
          </div>
          <div class="tab-content">
		  
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/images/donate/bmc_qr.png" alt="Scan Qrcode" title="Scan" />
              </div>
              <p class="text-muted mv">Scan QR Code</p>
              <p class="text-grey">Subscribe for exclusive posts for as little as $1</p>
            </div>
			
			
          </div>
		  
		  
        
		</div>
      </div>
    </div>
  </div>
</div>



</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/leixingyu" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="https://www.linkedin.com/in/xingyu-lei/" target="_blank" title="Linkedin" data-toggle=tooltip data-placement=top><i class="icon icon-linkedin"></i></a></li>
        
        <li><a href="https://www.youtube.com/@xingyulei" target="_blank" title="Youtube" data-toggle=tooltip data-placement=top><i class="icon icon-youtube"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        &copy; 2024 Xingyu Lei
        
        <!-- <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div> -->
    </div>
	
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   




   




    <script defer type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-206682944-1', 'auto');
ga('send', 'pageview');

</script>



</body>
</html>